{
  "config": {
    "step": {
      "user": {
        "title": "EV Charger Load Balancing",
        "description": "Configure the power meter and electrical service parameters. This integration currently supports one charger. Multi-charger support is planned for a future release.",
        "data": {
          "power_meter_entity": "Power meter sensor",
          "voltage": "Supply voltage",
          "max_service_current": "Max service current (breaker rating)",
          "unavailable_behavior": "When power meter is unavailable",
          "unavailable_fallback_current": "Fallback current (for 'Set a specific current' mode)",
          "action_set_current": "Set current action (script)",
          "action_stop_charging": "Stop charging action (script)",
          "action_start_charging": "Start charging action (script)",
          "charger_status_entity": "Charger status sensor (optional)"
        },
        "data_description": {
          "power_meter_entity": "Sensor entity that reports total service power in Watts.",
          "voltage": "Nominal supply voltage in Volts (used to convert W ↔ A).",
          "max_service_current": "Service current limit in Amps. Charging will never exceed this limit. You can set this lower than your actual breaker rating to reserve a safety margin — for example, enter 28 A on a 32 A service to keep 4 A free for other loads. It can also represent a subcircuit or any custom power budget.",
          "action_stop_charging": "Script entity called to stop charging when headroom is insufficient. Receives a 'charger_id' variable.",
          "action_start_charging": "Script entity called to start/resume charging after it was stopped. Receives a 'charger_id' variable.",
          "charger_status_entity": "Sensor whose state equals 'Charging' when the EV is actively charging (e.g. from the OCPP integration). When set, the balancer uses this to avoid over-subtracting headroom while the charger is idle or finished."
        }
      }
    },
    "error": {
      "entity_not_found": "The selected power meter entity was not found."
    },
    "abort": {
      "already_configured": "EV Charger Load Balancing is already configured."
    }
  },
  "options": {
    "step": {
      "init": {
        "title": "EV Charger Load Balancing Settings",
        "description": "Update the integration settings. The power meter sensor cannot be changed after initial setup.",
        "data": {
          "voltage": "Supply voltage",
          "max_service_current": "Max service current (breaker rating)",
          "unavailable_behavior": "When power meter is unavailable",
          "unavailable_fallback_current": "Fallback current (for 'Set a specific current' mode)",
          "action_set_current": "Set current action (script)",
          "action_stop_charging": "Stop charging action (script)",
          "action_start_charging": "Start charging action (script)",
          "charger_status_entity": "Charger status sensor (optional)"
        },
        "data_description": {
          "voltage": "Nominal supply voltage in Volts (used to convert W ↔ A).",
          "max_service_current": "Service current limit in Amps. Charging will never exceed this limit. You can set this lower than your actual breaker rating to reserve a safety margin — for example, enter 28 A on a 32 A service to keep 4 A free for other loads. It can also represent a subcircuit or any custom power budget.",
          "unavailable_behavior": "What to do when the power meter becomes unavailable: stop charging (safest), ignore and keep last value, or set a specific current (capped at the charger maximum).",
          "unavailable_fallback_current": "Charging current (A) to use when the meter is unavailable and mode is 'Set a specific current'. This value will be capped at the charger maximum.",
          "action_set_current": "Script entity called to set the charging current. Receives 'current_a' (float, amps), 'current_w' (float, watts), and 'charger_id' (string) variables.",
          "action_stop_charging": "Script entity called to stop charging. Receives a 'charger_id' (string) variable.",
          "action_start_charging": "Script entity called to start/resume charging. Receives a 'charger_id' (string) variable.",
          "charger_status_entity": "Sensor whose state equals 'Charging' when the EV is actively charging (e.g. from the OCPP integration). When set, the balancer uses this to avoid over-subtracting headroom while the charger is idle or finished."
        }
      }
    }
  },
  "entity": {
    "sensor": {
      "current_set": {
        "name": "Charging current set"
      },
      "power_set": {
        "name": "Charging power set"
      },
      "available_current": {
        "name": "Available current"
      },
      "last_action_reason": {
        "name": "Last action reason"
      },
      "balancer_state": {
        "name": "Balancer state"
      },
      "configured_fallback": {
        "name": "Configured meter fallback"
      },
      "last_action_error": {
        "name": "Last action error"
      },
      "last_action_timestamp": {
        "name": "Last action timestamp"
      }
    },
    "binary_sensor": {
      "active": {
        "name": "Load balancing active"
      },
      "meter_status": {
        "name": "Power meter status"
      },
      "fallback_active": {
        "name": "Power meter fallback"
      },
      "ev_charging": {
        "name": "EV charging"
      }
    },
    "number": {
      "max_charger_current": {
        "name": "Max charger current"
      },
      "min_ev_current": {
        "name": "Min EV current"
      },
      "ramp_up_time": {
        "name": "Ramp-up cooldown"
      },
      "overload_trigger_delay": {
        "name": "Overload trigger delay"
      },
      "overload_loop_interval": {
        "name": "Overload correction interval"
      }
    },
    "switch": {
      "enabled": {
        "name": "Load balancing enabled"
      }
    }
  }
}
